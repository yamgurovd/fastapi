# Celery

## Celery

Если в вашем приложении есть какой-то длительный процесс, вы можете обрабатывать его не в главном Python потоке (который
занимается обработкой запросов пользователей и не предназначен для долгих блокирующих задач), а в фоновом режиме.

К примеру, в вашем приложении пользователь должен отправить картинку (которую нам нужно будет отредактировать, сохранить
в разных разрешениях, проверить на соответствие размерам и т.п.) и подтвердить адрес электронной почты. Если ваше
приложение обрабатывает изображение, а потом отправляет письмо для подтверждения в обработчике запросов, то конечному
пользователю приходится зачем-то ждать завершения выполнения обеих задач перед тем, как закрыть страницу. Вместо этого,
вы можете передать эти операции в очередь задач и оставить на обработку отдельному процессу, чтобы немедленно отправить
пользователю ответ. В таком случае, конечный пользователь сможет заниматься другими делами на стороне во время
выполнения обработки задач сервером в фоновом режиме. Ваше приложение в таком случае сможет свободно отвечать на запросы
других пользователей и клиентов.

Celery — это известная библиотека для выполнения фоновых задач. Celery используется на многих Python проектах независимо
от фреймворка Django/Flask/FastAPI. Для хранения задач Celery использует брокеров, например, Redis или RabbitMQ. Так
сложились обстоятельства, что мы с вами уже познакомились с Redis и знаем о его возможностях. Celery использует Redis
как для хранения заданий, так и для хранения результатов выполнения задач. Например, если мы обрабатываем видео или фото
пользователя, генерируем отчет или конвертируем файл из docx в pdf, мы хотим сохранять в Redis результаты выполнения
заданий: в перечисленных случаях это будут ссылки на файлы, нужные пользователю.
